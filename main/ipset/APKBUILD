# Contributor: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
# Maintainer: Kaarle Ritvanen <kaarle.ritvanen@datakunkku.fi>
pkgname=ipset
pkgver=7.2
pkgrel=0
pkgdesc="Manage Linux IP sets"
url="http://ipset.netfilter.org/"
arch="all"
license="GPL-2.0"
depends_dev="libmnl-dev"
makedepends="$depends_dev automake autoconf libtool linux-headers"
subpackages="$pkgname-dev $pkgname-doc"
source="http://ipset.netfilter.org/ipset-$pkgver.tar.bz2
	ipset.initd"

builddir="$srcdir/$pkgname-$pkgver"
build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--with-kmod=no \
		--prefix=/usr
	make
}

package() {
	cd "$builddir"
	make install DESTDIR=$pkgdir

	mkdir -p "$pkgdir/etc/init.d" \
		"$pkgdir/etc/ipset.d"
	install -m 755 "$startdir/ipset.initd" "$pkgdir/etc/init.d/ipset"
}

sha512sums="b97321d8da5e9df04bab1d1250039a522f0349d929c61e9c51d0ce6a6b0c3b297715fe1d403e1e0b65ebed379612c95d3997684efe786b614f72930031eda4e2  ipset-7.2.tar.bz2
c7d3344ce879ff3b21f9e30a00d49a41cbd68172aec1a933a4b501dded54e3c57615386850901da22c652a34bcbe39caac86a3a0447da24bae29b40632153239  ipset.initd"
